# Hololive Kakao Bot - ì „ì²´ ê¸°ëŠ¥ ëª…ì„¸ì„œ

> **ì‘ì„±ì¼**: 2026-01-03  
> **ëŒ€ìƒ**: `hololive-kakao-bot-go` ì½”ë“œë² ì´ìŠ¤ ë¶„ì„  
> **ëª©ì **: Tauri ì•± ê¸°ëŠ¥ ì´ì‹ì„ ìœ„í•œ ê¸°ì¤€ ë¬¸ì„œ

---

## 1. ë´‡ ëª…ë ¹ì–´ (Commands)

ì¹´ì¹´ì˜¤í†¡ ì±„íŒ…ì—ì„œ ì‚¬ìš© ê°€ëŠ¥í•œ ëª…ë ¹ì–´ ëª©ë¡ì…ë‹ˆë‹¤.

### 1.1 ìŠ¤íŠ¸ë¦¼/ë°©ì†¡ ê´€ë ¨

| ëª…ë ¹ì–´ | íƒ€ì… | ì„¤ëª… | íŒŒë¼ë¯¸í„° |
|:---|:---|:---|:---|
| **live** | `CommandLive` | í˜„ì¬ ë¼ì´ë¸Œ ë°©ì†¡ ì¤‘ì¸ ìŠ¤íŠ¸ë¦¼ ëª©ë¡ ì¡°íšŒ | `member` (ì„ íƒ): íŠ¹ì • ë©¤ë²„ë§Œ í•„í„°ë§ |
| **upcoming** | `CommandUpcoming` | ì˜ˆì •ëœ ë°©ì†¡ ëª©ë¡ ì¡°íšŒ (ê¸°ë³¸ 24ì‹œê°„) | `hours` (ì„ íƒ, 1-168): ì¡°íšŒ ê¸°ê°„<br>`member` (ì„ íƒ): íŠ¹ì • ë©¤ë²„ í•„í„°ë§ |
| **schedule** | `CommandSchedule` | íŠ¹ì • ë©¤ë²„ì˜ í–¥í›„ ë°©ì†¡ ì¼ì • ì¡°íšŒ | `member` (í•„ìˆ˜): ë©¤ë²„ ì´ë¦„/ë³„ëª…<br>`days` (ì„ íƒ, 1-30): ì¡°íšŒ ê¸°ê°„ |

### 1.2 ì•ŒëŒ ê´€ë ¨

| ëª…ë ¹ì–´ | íƒ€ì… | ì„¤ëª… | íŒŒë¼ë¯¸í„° |
|:---|:---|:---|:---|
| **alarm add** | `CommandAlarmAdd` | íŠ¹ì • ë©¤ë²„ ë°©ì†¡ ì•Œë¦¼ ë“±ë¡ | `member` (í•„ìˆ˜): ë©¤ë²„ ì´ë¦„ |
| **alarm remove** | `CommandAlarmRemove` | íŠ¹ì • ë©¤ë²„ ë°©ì†¡ ì•Œë¦¼ í•´ì œ | `member` (í•„ìˆ˜): ë©¤ë²„ ì´ë¦„ |
| **alarm list** | `CommandAlarmList` | í˜„ì¬ ì„¤ì •ëœ ì•ŒëŒ ëª©ë¡ ì¡°íšŒ | ì—†ìŒ |
| **alarm clear** | `CommandAlarmClear` | ëª¨ë“  ì•ŒëŒ ì´ˆê¸°í™” | ì—†ìŒ |

### 1.3 ë©¤ë²„ ì •ë³´ ê´€ë ¨

| ëª…ë ¹ì–´ | íƒ€ì… | ì„¤ëª… | íŒŒë¼ë¯¸í„° |
|:---|:---|:---|:---|
| **member** | `CommandMemberInfo` | ë©¤ë²„ í”„ë¡œí•„ ì •ë³´ ì¡°íšŒ | `query` (ì„ íƒ): ë©¤ë²„ ì´ë¦„/ë³„ëª…<br>`channel_id` (ì„ íƒ): ì±„ë„ ID |
| **subscriber** | `CommandSubscriber` | íŠ¹ì • ë©¤ë²„ì˜ í˜„ì¬ êµ¬ë…ì ìˆ˜ ì¡°íšŒ | `member` (í•„ìˆ˜): ë©¤ë²„ ì´ë¦„/ë³„ëª… |
| **stats** | `CommandStats` | êµ¬ë…ì ì¦ê°€ ìˆœìœ„/í†µê³„ ì¡°íšŒ | `action` (ì„ íƒ): ê¸°ë³¸ "gainers"<br>`period` (ì„ íƒ): ê¸°ê°„ ì§€ì • |

#### 1.3.1 member ëª…ë ¹ì–´ ìƒì„¸

**ë‘ ê°€ì§€ ëª¨ë“œ:**

1. **ë©¤ë²„ ë””ë ‰í„°ë¦¬ ëª¨ë“œ** (ì¿¼ë¦¬ ì—†ì„ ë•Œ)
   - ì „ì²´ í™œì„± ë©¤ë²„ë¥¼ ê·¸ë£¹ë³„ë¡œ ì •ë ¬í•˜ì—¬ í‘œì‹œ
   - ê·¸ë£¹: Advent, Justice, Myth, Promise, ReGLOSS, holoX, ê¸°ìˆ˜ë³„ ë“±
   - ì¡¸ì—… ë©¤ë²„ ì œì™¸

2. **ê°œë³„ í”„ë¡œí•„ ëª¨ë“œ** (ì¿¼ë¦¬ ìˆì„ ë•Œ)
   - ê³µì‹ í”„ë¡œí•„ ë°ì´í„° ë¡œë“œ (`OfficialProfiles.GetWithTranslation()`)
   - í‘œì‹œ ì •ë³´:
     - ì˜ë¬¸ëª…/ì¼ë³¸ì–´ëª…
     - ìºì¹˜í”„ë ˆì´ì¦ˆ
     - ìƒì„¸ ë°ì´í„° (ìƒì¼, í‚¤, íŒ¬ë„¤ì„ ë“±)
     - ì†Œì…œ ë§í¬ (YouTube, Twitter ë“±)
   - ì¡¸ì—… ë©¤ë²„ëŠ” ê²½ê³  ë©”ì‹œì§€ ì¶”ê°€

**ë°ì´í„° ì†ŒìŠ¤:**
- `internal/domain/data/official_profiles_raw/*.json` - ë©¤ë²„ë³„ ìƒì„¸ í”„ë¡œí•„ (ì˜ë¬¸, ì„ë² ë“œ)
- `internal/domain/data/official_profiles_ko.json` - í•œêµ­ì–´ ë²ˆì—­ í”„ë¡œí•„ (ì„ë² ë“œ)
- `ProfileService` - ì¸ë©”ëª¨ë¦¬ ì¸ë±ì‹± + Valkey ìºì‹±

#### 1.3.2 subscriber ëª…ë ¹ì–´ ìƒì„¸

**ë™ì‘ íë¦„:**
1. ë©¤ë²„ ì´ë¦„/ë³„ëª…ìœ¼ë¡œ `Matcher.FindBestMatch()` í˜¸ì¶œ
2. Holodex APIë¡œ ì‹¤ì‹œê°„ ì±„ë„ ì •ë³´ ì¡°íšŒ (`holodex.GetChannel()`)
3. êµ¬ë…ì ìˆ˜ë¥¼ í•œêµ­ì–´ í˜•ì‹ìœ¼ë¡œ í¬ë§·íŒ… (`util.FormatKoreanNumber()`)
4. ê²°ê³¼ ë©”ì‹œì§€ ë°œì†¡

**ì¶œë ¥ ì˜ˆì‹œ:**
```
ğŸ‘¤ í† í‚¤ë…¸ ì†Œë¼

ğŸ“Š í˜„ì¬ êµ¬ë…ì: 123ë§Œ 4567ëª…
```

#### 1.3.3 stats ëª…ë ¹ì–´ ìƒì„¸

**ë™ì‘:**
- ê¸°ë³¸: êµ¬ë…ì ì¦ê°€ëŸ‰ ìƒìœ„ 10ëª… ì¡°íšŒ
- ê¸°ê°„ë³„ í•„í„°ë§ ê°€ëŠ¥ (daily, weekly, monthly)
- PostgreSQL `StatsRepository.GetTopGainers()` í˜¸ì¶œ

**ì¶œë ¥ ì˜ˆì‹œ:**
```
ğŸ“Š êµ¬ë…ì ì¦ê°€ ìˆœìœ„ (ì£¼ê°„)

1ìœ„. ê°€ìš°ë¥´ êµ¬ë¼
    +12,345ëª… (í˜„ì¬ 450ë§Œëª…)

2ìœ„. ëª¨ë¦¬ ì¹¼ë¦¬ì˜¤í˜
    +10,234ëª… (í˜„ì¬ 230ë§Œëª…)
...
```

### 1.4 ê¸°íƒ€

| ëª…ë ¹ì–´ | íƒ€ì… | ì„¤ëª… |
|:---|:---|:---|
| **help** | `CommandHelp` | ë„ì›€ë§ í‘œì‹œ |

---

## 2. ì•ŒëŒ ì‹œìŠ¤í…œ (Notification Service)

### 2.1 ì•ŒëŒ ë°ì´í„° ëª¨ë¸

```go
type Alarm struct {
    ID         int       // DB ê¸°ë³¸ í‚¤
    RoomID     string    // ì¹´ì¹´ì˜¤í†¡ ë°© ID
    UserID     string    // ì¹´ì¹´ì˜¤í†¡ ì‚¬ìš©ì ID
    ChannelID  string    // YouTube ì±„ë„ ID
    MemberName string    // í‘œì‹œìš© ë©¤ë²„ ì´ë¦„
    RoomName   string    // ë°© ì´ë¦„ (ìºì‹±ìš©)
    UserName   string    // ì‚¬ìš©ì ì´ë¦„ (ìºì‹±ìš©)
    CreatedAt  time.Time
}
```

### 2.2 ì•ŒëŒ ì €ì¥ì†Œ

| ì €ì¥ì†Œ | ìš©ë„ | íŠ¹ì§• |
|:---|:---|:---|
| **Valkey (Redis)** | ì‹¤ì‹œê°„ ì•ŒëŒ ì¡°íšŒ/ê´€ë¦¬ | Primary, Set ìë£Œêµ¬ì¡° |
| **PostgreSQL** | ì˜êµ¬ ì €ì¥ (Write-Through) | ë¹„ë™ê¸° ë°±ì—… |

### 2.3 ì•ŒëŒ ì²´í¬ ë¡œì§

1. **ìŠ¤ì¼€ì¤„ëŸ¬**: ë´‡ ì‹œì‘ ì‹œ `startAlarmChecker()` ì‹¤í–‰
2. **í´ë§ ì£¼ê¸°**: ì„¤ì • ê°€ëŠ¥ (ê¸°ë³¸ê°’ ë¯¸í™•ì¸, ì¶”ì • 1ë¶„ ê°„ê²©)
3. **ì•Œë¦¼ ì‹œì **: `targetMinutes` ë°°ì—´ë¡œ ì„¤ì • (ê¸°ë³¸: 5ë¶„, 3ë¶„, 1ë¶„ ì „)
4. **ì¼ì • ë³€ê²½ ê°ì§€**: `detectScheduleChange()` - ê¸°ì¡´ ìºì‹œì™€ í˜„ì¬ API ë°ì´í„° ë¹„êµ

### 2.4 ì•Œë¦¼ ìƒì„± íë¦„

```
[Scheduler Tick]
       â”‚
       â–¼
[ì±„ë„ ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì¡°íšŒ] â”€â”€â”€ êµ¬ë…ëœ ì±„ë„ ëª©ë¡
       â”‚
       â–¼ (Worker Pool - ë³‘ë ¬)
[ê° ì±„ë„ë³„ ìŠ¤íŠ¸ë¦¼ ì¡°íšŒ] â”€â”€â”€ Holodex API â†’ GetChannelSchedule()
       â”‚
       â–¼
[ì˜ˆì • ìŠ¤íŠ¸ë¦¼ í•„í„°ë§] â”€â”€â”€ targetMinutes ì´ë‚´ ì‹œì‘ ì˜ˆì •?
       â”‚
       â–¼
[ì¼ì • ë³€ê²½ ê°ì§€] â”€â”€â”€ ê¸°ì¡´ ìºì‹œ ì‹œê°„ vs í˜„ì¬ API ì‹œê°„
       â”‚
       â–¼
[AlarmNotification ìƒì„±] â”€â”€â”€ ë£¸ë³„, ìœ ì €ë³„ ê·¸ë£¹í™”
       â”‚
       â–¼
[Kakao ë©”ì‹œì§€ ë°œì†¡] â”€â”€â”€ Iris Client via Valkey MQ
```

### 2.5 ì£¼ìš” ìºì‹œ í‚¤

| í‚¤ íŒ¨í„´ | ìš©ë„ |
|:---|:---|
| `alarm:{roomID}:{userID}` | ì‚¬ìš©ìë³„ ì•ŒëŒ ì±„ë„ Set |
| `alarm:registry` | ì „ì²´ ì‚¬ìš©ì ë ˆì§€ìŠ¤íŠ¸ë¦¬ |
| `alarm:channel:registry` | êµ¬ë…ëœ ì±„ë„ ë ˆì§€ìŠ¤íŠ¸ë¦¬ |
| `channel:{channelID}:subs` | ì±„ë„ë³„ êµ¬ë…ì ëª©ë¡ |
| `member:{channelID}:name` | ë©¤ë²„ ì´ë¦„ ìºì‹œ |
| `room_names` | ë°© ì´ë¦„ ìºì‹œ (Hash) |
| `user_names` | ìœ ì € ì´ë¦„ ìºì‹œ (Hash) |
| `notified:{streamID}` | ì•Œë¦¼ ë°œì†¡ ê¸°ë¡ (**ë³€ë™ ê°ì§€ìš©**) |

### 2.6 ë°©ì†¡ ì‹œê°„ ë³€ë™ ê°ì§€ ë¡œì§ ìƒì„¸

**í•µì‹¬ ì›ë¦¬:**
- ì•Œë¦¼ ë°œì†¡ ì‹œ **ì˜ˆì • ì‹œì‘ ì‹œê°„ì„ ìºì‹œì— ì €ì¥**
- ë‹¤ìŒ ì²´í¬ì—ì„œ **API ë°ì´í„°ì™€ ë¹„êµ**í•˜ì—¬ ë³€ë™ ê°ì§€

#### 2.6.1 NotifiedData êµ¬ì¡°ì²´

```go
type NotifiedData struct {
    StartScheduled string `json:"start_scheduled"`  // RFC3339 í¬ë§· ì˜ˆì • ì‹œì‘ ì‹œê°„
    NotifiedAt     string `json:"notified_at"`      // ì•Œë¦¼ ë°œì†¡ ì‹œê°
    MinutesUntil   int    `json:"minutes_until"`    // ì•Œë¦¼ ì‹œì  (5ë¶„ì „, 3ë¶„ì „ ë“±)
}
```

#### 2.6.2 ë³€ë™ ê°ì§€ íë¦„

```
[createNotification() í˜¸ì¶œ]
       â”‚
       â–¼
[detectScheduleChange(ctx, stream)]
       â”‚
       â”œâ”€â”€ 1. Valkeyì—ì„œ "notified:{streamID}" ì¡°íšŒ
       â”‚      â””â”€â”€ NotifiedData.StartScheduled íšë“
       â”‚
       â”œâ”€â”€ 2. í˜„ì¬ API ë°ì´í„°ì˜ stream.StartScheduledì™€ ë¹„êµ
       â”‚      â””â”€â”€ Unix timestamp ê¸°ì¤€ ë¹„êµ
       â”‚
       â””â”€â”€ 3. ë‹¤ë¥´ë©´ ë³€ê²½ ë©”ì‹œì§€ ìƒì„±
              â”œâ”€â”€ ëŠ¦ì¶°ì§: "ì¼ì •ì´ Në¶„ ëŠ¦ì¶°ì¡ŒìŠµë‹ˆë‹¤."
              â””â”€â”€ ì•ë‹¹ê²¨ì§: "ì¼ì •ì´ Në¶„ ì•ë‹¹ê²¨ì¡ŒìŠµë‹ˆë‹¤."
```

#### 2.6.3 ì•Œë¦¼ ë°œì†¡ í›„ ê¸°ë¡ (MarkAsNotified)

```go
// ì•Œë¦¼ ë°œì†¡ í›„ í˜¸ì¶œ
func MarkAsNotified(ctx, streamID, startScheduled, minutesUntil) {
    notifiedKey := "notified:" + streamID
    notifiedData := NotifiedData{
        StartScheduled: startScheduled.Format(time.RFC3339),  // â† ì´ ì‹œê°„ì´ ë‚˜ì¤‘ì— ë¹„êµë¨
        NotifiedAt:     time.Now().Format(time.RFC3339),
        MinutesUntil:   minutesUntil,
    }
    cache.Set(ctx, notifiedKey, notifiedData, TTL)  // TTL: 2ì‹œê°„ (ì¶”ì •)
}
```

#### 2.6.4 ì¤‘ë³µ ë°œì†¡ ë°©ì§€ + ë³€ê²½ ì‹œ ì¬ë°œì†¡

```go
// createNotification() ë‚´ë¶€ ë¡œì§
scheduleChangeMsg := detectScheduleChange(ctx, stream)

// ì´ë¯¸ ì•Œë¦¼ì„ ë³´ëƒˆê³  ì¼ì • ë³€ê²½ì´ ì—†ìœ¼ë©´ â†’ ìŠ¤í‚µ
if scheduleChangeMsg == "" && isAlreadyNotified(ctx, stream.ID) {
    return  // ì¤‘ë³µ ë°œì†¡ ë°©ì§€
}

// ì¼ì • ë³€ê²½ ê°ì§€ë¨ â†’ ë³€ê²½ ë©”ì‹œì§€ì™€ í•¨ê»˜ ì¬ë°œì†¡
// scheduleChangeMsgê°€ ì•Œë¦¼ì— í¬í•¨ë¨
```

#### 2.6.5 Tauri ì•± êµ¬í˜„ ë°©ì•ˆ

```sql
-- SQLite í…Œì´ë¸”
CREATE TABLE notification_history (
    stream_id TEXT PRIMARY KEY,
    start_scheduled_at TEXT,  -- RFC3339 í¬ë§·
    notified_at TEXT,
    minutes_until INTEGER
);
```

```
[ì•± ìŠ¤ì¼€ì¤„ëŸ¬ (1ë¶„ë§ˆë‹¤)]
       â”‚
       â–¼
[ì„œë²„ API í˜¸ì¶œ: GET /streams/upcoming]
       â”‚
       â–¼
[ì•ŒëŒ ë“±ë¡ëœ ì±„ë„ì˜ ìŠ¤íŠ¸ë¦¼ í•„í„°ë§]
       â”‚
       â–¼
[ë¡œì»¬ notification_history ì¡°íšŒ]
       â”‚
       â”œâ”€â”€ ê¸°ë¡ ì—†ìŒ â†’ ìƒˆ ì•Œë¦¼, DBì— ê¸°ë¡ í›„ ë°œì†¡
       â”‚
       â”œâ”€â”€ ê¸°ë¡ ìˆê³  start_scheduled_at ë™ì¼ â†’ ì¤‘ë³µ, ìŠ¤í‚µ
       â”‚
       â””â”€â”€ ê¸°ë¡ ìˆê³  start_scheduled_at ë‹¤ë¦„ â†’ ë³€ê²½ ê°ì§€!
              â”œâ”€â”€ diff ê³„ì‚°í•˜ì—¬ "Në¶„ ëŠ¦ì¶°ì§/ì•ë‹¹ê²¨ì§" ë©”ì‹œì§€ ìƒì„±
              â”œâ”€â”€ DB ì—…ë°ì´íŠ¸
              â””â”€â”€ ë³€ê²½ ì•Œë¦¼ ë°œì†¡
```

---

## 3. Holodex ì„œë¹„ìŠ¤ (External API)

### 3.1 API Client ê¸°ëŠ¥

| ê¸°ëŠ¥ | ì„¤ëª… |
|:---|:---|
| **Rate Limiter** | ì´ˆë‹¹ 10 ìš”ì²­ ì œí•œ (`golang.org/x/time/rate`) |
| **Circuit Breaker** | 3íšŒ ì—°ì† ì‹¤íŒ¨ ì‹œ íšŒë¡œ ì—´ë¦¼, 30ì´ˆ í›„ ë¦¬ì…‹ |
| **Retry with Backoff** | ìµœëŒ€ 3íšŒ, ì§€ìˆ˜ ë°±ì˜¤í”„ (500ms ~ 5s) |
| **API Key Pool** | ë‹¤ì¤‘ API í‚¤ ë¡œí…Œì´ì…˜ |
| **Request Timeout** | ì„¤ì • ê°€ëŠ¥ |

### 3.2 ì£¼ìš” ë©”ì„œë“œ

| ë©”ì„œë“œ | ì„¤ëª… | ìºì‹œ TTL |
|:---|:---|:---|
| `GetLiveStreams()` | í˜„ì¬ ë¼ì´ë¸Œ ìŠ¤íŠ¸ë¦¼ ì¡°íšŒ | 5ë¶„ |
| `GetUpcomingStreams(hours)` | ì˜ˆì • ìŠ¤íŠ¸ë¦¼ ì¡°íšŒ | 5ë¶„ |
| `GetChannelSchedule(channelID, hours, includeLive)` | íŠ¹ì • ì±„ë„ ì¼ì • ì¡°íšŒ | 5ë¶„ |
| `SearchChannels(query)` | ì±„ë„ ê²€ìƒ‰ | 10ë¶„ |
| `GetChannel(channelID)` | ì±„ë„ ìƒì„¸ ì •ë³´ | 20ë¶„ |

### 3.3 Scraper Fallback

- Holodex API ì¥ì•  ì‹œ HTML ìŠ¤í¬ë˜í•‘ í´ë°± ì§€ì›
- `ScraperService` êµ¬í˜„

---

## 4. ë„ë©”ì¸ ëª¨ë¸ (Domain)

### 4.1 Stream

```go
type Stream struct {
    ID             string       // YouTube ë¹„ë””ì˜¤ ID
    Title          string       // ë°©ì†¡ ì œëª©
    ChannelID      string       // ì±„ë„ ID
    ChannelName    string       // ì±„ë„ ì´ë¦„
    Status         StreamStatus // live, upcoming, past
    StartScheduled *time.Time   // ì˜ˆì • ì‹œì‘ ì‹œê°„
    StartActual    *time.Time   // ì‹¤ì œ ì‹œì‘ ì‹œê°„
    Duration       *int         // ë°©ì†¡ ê¸¸ì´ (ì´ˆ)
    Thumbnail      *string      // ì¸ë„¤ì¼ URL
    Link           *string      // ë°©ì†¡ URL
    TopicID        *string      // í† í”½ ID
    Channel        *Channel     // ì±„ë„ ì •ë³´ (ì„ íƒ)
}
```

### 4.2 Channel

```go
type Channel struct {
    ID              string  // YouTube ì±„ë„ ID
    Name            string  // ì±„ë„ëª…
    EnglishName     *string // ì˜ë¬¸ ì´ë¦„
    Photo           *string // í”„ë¡œí•„ ì‚¬ì§„ URL
    Twitter         *string // íŠ¸ìœ„í„° í•¸ë“¤
    VideoCount      *int    // ì´ ì˜ìƒ ìˆ˜
    SubscriberCount *int    // êµ¬ë…ì ìˆ˜
    Org             *string // ì†Œì† (Hololive, Nijisanji ë“±)
    Suborg          *string // ì„¸ë¶€ ì†Œì†
    Group           *string // ê·¸ë£¹ (ê¸°ìˆ˜ ë“±)
}
```

### 4.3 Member

```go
type Member struct {
    ID          int      // DB ID
    ChannelID   string   // YouTube ì±„ë„ ID
    Name        string   // ê³µì‹ ì´ë¦„
    Aliases     *Aliases // ë³„ëª… (í•œêµ­ì–´, ì¼ë³¸ì–´)
    NameJa      string   // ì¼ë³¸ì–´ ì´ë¦„
    NameKo      string   // í•œêµ­ì–´ ì´ë¦„
    IsGraduated bool     // ì¡¸ì—… ì—¬ë¶€
}

type Aliases struct {
    Ko []string // í•œêµ­ì–´ ë³„ëª…
    Ja []string // ì¼ë³¸ì–´ ë³„ëª…
}
```

### 4.4 AlarmNotification

```go
type AlarmNotification struct {
    RoomID                string   // ëŒ€ìƒ ì±„íŒ…ë°©
    Channel               *Channel // ì±„ë„ ì •ë³´
    Stream                *Stream  // ìŠ¤íŠ¸ë¦¼ ì •ë³´
    MinutesUntil          int      // ì‹œì‘ê¹Œì§€ ë‚¨ì€ ë¶„
    Users                 []string // ì•Œë¦¼ ëŒ€ìƒ ìœ ì € ëª©ë¡
    ScheduleChangeMessage string   // ì¼ì • ë³€ê²½ ë©”ì‹œì§€ (ìˆëŠ” ê²½ìš°)
}
```

---

## 5. ë©¤ë²„ ë°ì´í„° (Static Data)

### 5.1 ë°ì´í„° ì†ŒìŠ¤

- **íŒŒì¼**: `internal/domain/data/members.json`
- **ë¡œë”©**: Go ë°”ì´ë„ˆë¦¬ì— `//go:embed`ë¡œ ì„ë² ë“œ
- **êµ¬ì¡°**: `MembersData` êµ¬ì¡°ì²´ë¡œ íŒŒì‹±, ì±„ë„ID/ì´ë¦„ë³„ O(1) ì¡°íšŒ ë§µ êµ¬ì¶•

### 5.2 ë©¤ë²„ ê·¸ë£¹ ëª©ë¡

ì½”ë“œì—ì„œ í™•ì¸ëœ ê·¸ë£¹:
- Advent, FLOW GLOW, Justice, Myth, Promise
- ReGLOSS
- ë¹„ë°€ê²°ì‚¬ holoX
- í™€ë¡œë¼ì´ë¸Œ 0ê¸°ìƒ ~ 5ê¸°ìƒ
- í™€ë¡œë¼ì´ë¸Œ ê²Œì´ë¨¸ì¦ˆ
- í™€ë¡œë¼ì´ë¸Œ ì¸ë„ë„¤ì‹œì•„

---

## 6. YouTube ì„œë¹„ìŠ¤

### 6.1 StatsRepository

- **êµ¬ë…ì í†µê³„ ì¡°íšŒ**: `GetTopGainers(since, limit)`
- **ê¸°ê°„ë³„ í†µê³„**: daily, weekly, monthly ë“± ì§€ì›

### 6.2 YouTube API ì—°ë™

- ì±„ë„ êµ¬ë…ì ìˆ˜ ì¡°íšŒ
- Quota ê´€ë¦¬ ê³ ë ¤ í•„ìš”

---

## 7. Admin API (ê¸°ì¡´ ì—”ë“œí¬ì¸íŠ¸)

### 7.1 í˜„ì¬ ë¼ìš°íŠ¸ (`/api/holo/...`)

| ë©”ì„œë“œ | ê²½ë¡œ | ì„¤ëª… |
|:---|:---|:---|
| GET | `/members` | ì „ì²´ ë©¤ë²„ ëª©ë¡ |
| POST | `/members` | ë©¤ë²„ ì¶”ê°€ |
| POST | `/members/:id/aliases` | ë³„ì¹­ ì¶”ê°€ |
| DELETE | `/members/:id/aliases` | ë³„ì¹­ ì‚­ì œ |
| GET | `/alarms` | ì „ì²´ ì•ŒëŒ ì¡°íšŒ |
| DELETE | `/alarms` | ì•ŒëŒ ì‚­ì œ |
| GET | `/rooms` | ë°© ëª©ë¡ ì¡°íšŒ |
| POST | `/rooms` | ë°© ì¶”ê°€ |
| DELETE | `/rooms` | ë°© ì‚­ì œ |
| POST | `/rooms/acl` | ACL ì„¤ì • |
| GET | `/stats` | ë´‡ í†µê³„ |
| GET | `/stats/channels` | ì±„ë„ í†µê³„ (10ë¶„ ìºì‹œ) |
| GET | `/streams/live` | í˜„ì¬ ë¼ì´ë¸Œ ìŠ¤íŠ¸ë¦¼ |
| GET | `/streams/upcoming` | ì˜ˆì • ìŠ¤íŠ¸ë¦¼ |
| GET | `/logs` | í™œë™ ë¡œê·¸ |
| GET | `/settings` | ë´‡ ì„¤ì • ì¡°íšŒ |
| POST | `/settings` | ë´‡ ì„¤ì • ë³€ê²½ |
| POST | `/names/room` | ë°© ì´ë¦„ ì„¤ì • |
| POST | `/names/user` | ìœ ì € ì´ë¦„ ì„¤ì • |
| GET | `/milestones` | ë§ˆì¼ìŠ¤í†¤ ì¡°íšŒ |
| GET | `/milestones/near` | ê·¼ì ‘ ë§ˆì¼ìŠ¤í†¤ |
| GET | `/milestones/stats` | ë§ˆì¼ìŠ¤í†¤ í†µê³„ |

### 7.2 ì¸í”„ë¼ ì—”ë“œí¬ì¸íŠ¸

| ë©”ì„œë“œ | ê²½ë¡œ | ì„¤ëª… |
|:---|:---|:---|
| GET | `/health` | í—¬ìŠ¤ì²´í¬ |
| GET | `/metrics` | Prometheus ë©”íŠ¸ë¦­ |

---

## 8. ì™¸ë¶€ ì˜ì¡´ì„± ìš”ì•½

| ì˜ì¡´ì„± | ìš©ë„ |
|:---|:---|
| **Valkey (Redis)** | ìºì‹œ, ì•ŒëŒ ë ˆì§€ìŠ¤íŠ¸ë¦¬, MQ |
| **PostgreSQL** | ì•ŒëŒ ì˜êµ¬ ì €ì¥, í†µê³„ ì´ë ¥ |
| **Holodex API** | ìŠ¤íŠ¸ë¦¼/ì±„ë„ ë°ì´í„° |
| **YouTube API** | êµ¬ë…ì í†µê³„ |
| **Iris Bridge** | ì¹´ì¹´ì˜¤í†¡ ë©”ì‹œì§€ ì†¡ìˆ˜ì‹  |
| **Cloudflare Tunnel** | Admin API ì™¸ë¶€ ë…¸ì¶œ |

---

## 9. Tauri ì•± ì´ì‹ ì‹œ ê³ ë ¤ì‚¬í•­

### 9.1 ì„œë²„ì— ìœ ì§€í•´ì•¼ í•  ê¸°ëŠ¥

| ê¸°ëŠ¥ | ì´ìœ  |
|:---|:---|
| **ì•ŒëŒ ì²´í¬ ìŠ¤ì¼€ì¤„ëŸ¬** | ì¼ì • ë³€ê²½ ê°ì§€, ì¤‘ì•™ ì§‘ì¤‘ ì•Œë¦¼ |
| **ì•ŒëŒ ë°ì´í„° ì €ì¥** | Valkey + PostgreSQL ì˜ì†ì„± |
| **Holodex API í˜¸ì¶œ** | Rate Limit ì¤‘ì•™ ê´€ë¦¬, API í‚¤ ë³´í˜¸ |

### 9.2 ì•±ì—ì„œ êµ¬í˜„ ê°€ëŠ¥í•œ ê¸°ëŠ¥

| ê¸°ëŠ¥ | êµ¬í˜„ ë°©ì‹ |
|:---|:---|
| **ìŠ¤íŠ¸ë¦¼ ëª©ë¡ ì¡°íšŒ** | ì„œë²„ API í˜¸ì¶œ (`/streams/live`, `/streams/upcoming`) |
| **ë©¤ë²„ ê²€ìƒ‰/ì¡°íšŒ** | ì„œë²„ API í˜¸ì¶œ (`/members`) |
| **ì•ŒëŒ ë“±ë¡/í•´ì œ** | ì„œë²„ API í˜¸ì¶œ (ì‹ ê·œ POST `/alarms` í•„ìš”) |
| **ì•ŒëŒ ëª©ë¡ ì¡°íšŒ** | ì„œë²„ API í˜¸ì¶œ (`/alarms` + ìœ ì € í•„í„°ë§) |
| **ì„¤ì • ì €ì¥** | ë¡œì»¬ SQLite (í…Œë§ˆ, ì–¸ì–´ ë“±) |
| **ì•Œë¦¼ íˆìŠ¤í† ë¦¬** | ë¡œì»¬ SQLite (ì¤‘ë³µ ë°œì†¡ ë°©ì§€) |
| **ë„¤ì´í‹°ë¸Œ ì•Œë¦¼** | ğŸ”´ **ì•„ë˜ ì–‘ë°©í–¥ í†µì‹  í•´ê²° í•„ìš”** |

### 9.3 ğŸ”´ ì–‘ë°©í–¥ ì•ŒëŒ í†µì‹  ë¬¸ì œ

**í˜„ì¬ ë´‡ êµ¬ì¡° (ë‹¨ë°©í–¥ í‘¸ì‹œ):**
```
[ì‚¬ìš©ì] â”€â”€ì•ŒëŒë“±ë¡â”€â”€â–¶ [ë´‡ (ì„œë²„)]
                          â”‚
                          â”‚ ìŠ¤ì¼€ì¤„ëŸ¬ë¡œ ì¼ì • ì²´í¬
                          â–¼
[ì‚¬ìš©ì] â—€â”€â”€ì•ŒëŒë°œì†¡â”€â”€  [ë´‡] â”€â”€â–¶ [Kakao via Iris]
```

**ë¬¸ì œì :**
- í˜„ì¬ ë´‡ì€ **Kakao Iris Bridge**ë¥¼ í†µí•´ ì‚¬ìš©ìì—ê²Œ ì§ì ‘ ë©”ì‹œì§€ í‘¸ì‹œ ê°€ëŠ¥
- Tauri ì•±ì€ **Passive Client** - ì„œë²„ê°€ ì•±ì— ì§ì ‘ ìš”ì²­ ë³´ë‚¼ ìˆ˜ ì—†ìŒ
- ì•± â†’ ì„œë²„: âœ… OK (HTTP API)
- ì„œë²„ â†’ ì•±: âŒ **ì—°ê²° ë°©ë²• í•„ìš”**

**í•´ê²° ë°©ì•ˆ:**

| ë°©ì•ˆ | ì„¤ëª… | ì¥ì  | ë‹¨ì  |
|:---|:---|:---|:---|
| **A. ì•± í´ë§** | ì•±ì´ ì£¼ê¸°ì ìœ¼ë¡œ `/pending-alarms` API í˜¸ì¶œ | êµ¬í˜„ ê°„ë‹¨, ì„œë²„ ìˆ˜ì • ìµœì†Œ | ë°°í„°ë¦¬ ì†Œëª¨, ì§€ì—° ë°œìƒ |
| **B. WebSocket** | ì•±â†”ì„œë²„ ìƒì‹œ ì—°ê²°, ì„œë²„ê°€ ì•Œë¦¼ í‘¸ì‹œ | ì‹¤ì‹œê°„, ì–‘ë°©í–¥ | ì—°ê²° ìœ ì§€ ë¹„ìš©, ëª¨ë°”ì¼ ë°±ê·¸ë¼ìš´ë“œ ì œí•œ |
| **C. Push Notification** | FCM(Android)/APNs(iOS) ì—°ë™ | ë„¤ì´í‹°ë¸Œ, ë°±ê·¸ë¼ìš´ë“œ ì§€ì› | FCM/APNs ì„¤ì • í•„ìš”, ë³µì¡ë„ ì¦ê°€ |
| **D. SSE** | Server-Sent Events, ë‹¨ë°©í–¥ ìŠ¤íŠ¸ë¦¼ | HTTP ê¸°ë°˜, ê°„ë‹¨ | ë‹¨ë°©í–¥ë§Œ, ëª¨ë°”ì¼ ë°±ê·¸ë¼ìš´ë“œ ì œí•œ |

**ê¶Œì¥ ë°©ì•ˆ: E. ë¡œì»¬ ì•ŒëŒ + API ê²€ì¦ (âœ… ê°€ì¥ ë‹¨ìˆœ)**

| í•­ëª© | ì„¤ëª… |
|:---|:---|
| **ì•ŒëŒ ì €ì¥** | ì•± ë¡œì»¬ SQLiteì— ì €ì¥ (ì„œë²„ ì˜ì¡´ X) |
| **ì•ŒëŒ ì²´í¬** | ì•±ì´ ìŠ¤ì¼€ì¤„ëŸ¬ë¡œ ìì²´ ì²´í¬ |
| **ì¼ì • ê²€ì¦** | ì•ŒëŒ ë°œì†¡ ì§ì „ì— ì„œë²„ APIë¡œ ì¼ì • ë³€ë™ í™•ì¸ |
| **ì•Œë¦¼ ë°œì†¡** | ë³€ë™ ì—†ìœ¼ë©´ ë„¤ì´í‹°ë¸Œ ì•Œë¦¼, ë³€ë™ ìˆìœ¼ë©´ ì—…ë°ì´íŠ¸ í›„ ì•Œë¦¼ |

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Tauri App (ì™„ì „ ìë¦½í˜•)                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  ë¡œì»¬ SQLite                                                    â”‚    â”‚
â”‚  â”‚  â€¢ alarms í…Œì´ë¸”: channel_id, member_name, notify_minutes       â”‚    â”‚
â”‚  â”‚  â€¢ notification_history: stream_id (ì¤‘ë³µ ë°©ì§€)                  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  ì•± ìŠ¤ì¼€ì¤„ëŸ¬ (1ë¶„ ê°„ê²©)                                         â”‚    â”‚
â”‚  â”‚  1. ë¡œì»¬ ì•ŒëŒ ëª©ë¡ ì¡°íšŒ                                         â”‚    â”‚
â”‚  â”‚  2. ì„œë²„ APIë¡œ í•´ë‹¹ ì±„ë„ ìŠ¤íŠ¸ë¦¼ í™•ì¸                            â”‚    â”‚
â”‚  â”‚     GET /api/holo/streams/upcoming (ì´ë¯¸ ì¡´ì¬)                  â”‚    â”‚
â”‚  â”‚  3. ì•ŒëŒ ì‹œê°„ ë„ë‹¬ ì‹œ â†’ ë„¤ì´í‹°ë¸Œ ì•Œë¦¼                           â”‚    â”‚
â”‚  â”‚  4. ì¼ì • ë³€ê²½ ê°ì§€ â†’ ë¡œì»¬ DB ì—…ë°ì´íŠ¸ + ë³€ê²½ ì•Œë¦¼               â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼ HTTP (ì½ê¸° ì „ìš©)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    hololive-kakao-bot-go (ì„œë²„)                         â”‚
â”‚  â€¢ GET /api/holo/streams/live      (ê¸°ì¡´)                               â”‚
â”‚  â€¢ GET /api/holo/streams/upcoming  (ê¸°ì¡´)                               â”‚
â”‚  â€¢ GET /api/holo/members           (ê¸°ì¡´)                               â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  ì„œë²„ ìˆ˜ì • ì‚¬í•­: ì—†ìŒ! ê¸°ì¡´ APIë§Œìœ¼ë¡œ ì¶©ë¶„                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ì´ ë°©ì‹ì˜ í•µì‹¬:**
- ì„œë²„: ìŠ¤íŠ¸ë¦¼/ë©¤ë²„ **ë°ì´í„° ì œê³µ**ë§Œ ë‹´ë‹¹ (ì´ë¯¸ ì™„ë£Œ)
- ì•±: ì•ŒëŒ **ê´€ë¦¬/ì²´í¬/ë°œì†¡** ì „ë¶€ ë¡œì»¬ì—ì„œ ì²˜ë¦¬
- Kakao ë´‡ì˜ ì•ŒëŒ ë°ì´í„°ì™€ **ì™„ì „ ë¶„ë¦¬** (ê°ì ë…ë¦½ ìš´ì˜)

**ì•± ì•ŒëŒ íë¦„:**
```
[ìœ ì €ê°€ ì•±ì—ì„œ ì•ŒëŒ ë“±ë¡]
           â”‚
           â–¼
[SQLiteì— ì €ì¥: {channelId, memberName, notifyMinutesBefore}]
           â”‚
           â–¼ (ë§¤ 1ë¶„ë§ˆë‹¤)
[ì•± ìŠ¤ì¼€ì¤„ëŸ¬] â”€â”€â–¶ GET /api/holo/streams/upcoming
           â”‚
           â–¼
[ë“±ë¡ëœ ì±„ë„ì˜ ìŠ¤íŠ¸ë¦¼ ì¤‘ ì•Œë¦¼ ì‹œê°„ ë„ë‹¬í•œ ê²ƒ í•„í„°ë§]
           â”‚
           â”œâ”€â”€ ì¼ì • ë³€ê²½ ê°ì§€? â”€â”€â–¶ ë³€ê²½ ì•Œë¦¼ ë°œì†¡
           â”‚
           â–¼
[notification_historyì— ì—†ìœ¼ë©´] â”€â”€â–¶ ë„¤ì´í‹°ë¸Œ ì•Œë¦¼ ë°œì†¡
           â”‚
           â–¼
[notification_historyì— stream_id ê¸°ë¡] (ì¤‘ë³µ ë°©ì§€)
```

---

**ëŒ€ì•ˆ ë°©ì•ˆ (ì°¸ê³ ìš©):**

| ë°©ì•ˆ | ì„¤ëª… | ë³µì¡ë„ |
|:---|:---|:---|
| A. ì•± í´ë§ (ì„œë²„ ì €ì¥) | ì„œë²„ì— ì•ŒëŒ ì €ì¥, ì•±ì´ pending í´ë§ | ì¤‘ |
| B. WebSocket | ì‹¤ì‹œê°„ ì–‘ë°©í–¥ | ê³  |
| C. Push Notification | FCM/APNs | ê³  |
| **E. ë¡œì»¬ ì•ŒëŒ + API ê²€ì¦** | âœ… ìœ„ ê¶Œì¥ì•ˆ | **ì €** |

### 9.4 ì‹ ê·œ API í•„ìš” ëª©ë¡ (ë¡œì»¬ ì•ŒëŒ ë°©ì‹ ì±„íƒ ì‹œ)

> **ë¡œì»¬ ì•ŒëŒ ë°©ì‹**ì„ ì‚¬ìš©í•˜ë©´ ì•ŒëŒ ê´€ë ¨ APIëŠ” ë¶ˆí•„ìš”í•©ë‹ˆë‹¤.
> ê¸°ì¡´ APIë§Œìœ¼ë¡œ ì¶©ë¶„í•©ë‹ˆë‹¤.

| ê¸°ëŠ¥ | ì—”ë“œí¬ì¸íŠ¸ | í•„ìš”ì„± |
|:---|:---|:---|
| ë¼ì´ë¸Œ ìŠ¤íŠ¸ë¦¼ | `GET /api/holo/streams/live` | âœ… ì´ë¯¸ ì¡´ì¬ |
| ì˜ˆì • ìŠ¤íŠ¸ë¦¼ | `GET /api/holo/streams/upcoming` | âœ… ì´ë¯¸ ì¡´ì¬ |
| ë©¤ë²„ ëª©ë¡ | `GET /api/holo/members` | âœ… ì´ë¯¸ ì¡´ì¬ |
| ë©¤ë²„ ê²€ìƒ‰ | `GET /api/holo/members/search?q=xxx` | âš¡ ì„ íƒ (ì•±ì—ì„œ ë¡œì»¬ í•„í„°ë§ ê°€ëŠ¥) |

---

## 10. ì°¸ê³ : ê¸°ì¡´ ì½”ë“œ ìœ„ì¹˜

| ì˜ì—­ | ê²½ë¡œ |
|:---|:---|
| ëª…ë ¹ì–´ í•¸ë“¤ëŸ¬ | `internal/command/*.go` |
| ì•ŒëŒ ì„œë¹„ìŠ¤ | `internal/service/notification/` |
| Holodex í´ë¼ì´ì–¸íŠ¸ | `internal/service/holodex/` |
| ë„ë©”ì¸ ëª¨ë¸ | `internal/domain/` |
| ë©¤ë²„ ë°ì´í„° | `internal/domain/data/members.json` |
| Admin API í•¸ë“¤ëŸ¬ | `internal/server/admin_*.go` |
| ë´‡ ì½”ì–´ | `internal/bot/bot.go` |
| ë¼ìš°í„° ì„¤ì • | `internal/app/admin_router.go` |
